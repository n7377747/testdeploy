(this.webpackJsonpmanojform=this.webpackJsonpmanojform||[]).push([[0],{137:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),c=(a(86),a(87),a(88),a(89),a(90),a(41)),m=a(42),l=a(44),i=a(43),u=a(9),d=a(13),h=" https://manojdbserver.herokuapp.com/",f=function(e){return{type:"COMMENTS_FAILED",payload:e}},p=function(e){return{type:"ADD_COMMENTS",payload:e}},E=a(11),g=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",null,"Loading . . ."))},v=a(57),b=a(77),C=a(140),x=a(141),N=a(142),O=a(143),w=a(144),y=a(145),k=a(146),j=a(147),S=a(148),M=a(149),I=(a(137),function(e){return e&&e.length}),A=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},T=function(e,t){return function(a){return(n=e,function(e){return e&&e.length>=n})(a)&&function(e){return function(t){return!t||t.length<=e}}(t)(a);var n}},F=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isCommentFormOpen:!0,animating:!1,activeIndex:0,toastShow:!1},n.renderCommentsCarousel=n.renderCommentsCarousel.bind(Object(E.a)(n)),n.toggleComment=n.toggleComment.bind(Object(E.a)(n)),n.handleComment=n.handleComment.bind(Object(E.a)(n)),n.next=n.next.bind(Object(E.a)(n)),n.previous=n.previous.bind(Object(E.a)(n)),n.setActiveIndex=n.setActiveIndex.bind(Object(E.a)(n)),n.setAnimating=n.setAnimating.bind(Object(E.a)(n)),n.toggleToastShow=n.toggleToastShow.bind(Object(E.a)(n)),n}return Object(m.a)(a,[{key:"toggleComment",value:function(){this.setState({isCommentFormOpen:!this.state.isCommentFormOpen})}},{key:"toggleToastShow",value:function(){this.setState({toastShow:!this.state.toastShow})}},{key:"setActiveIndex",value:function(e){this.setState({activeIndex:e})}},{key:"setAnimating",value:function(e){this.setState({animating:e})}},{key:"next",value:function(){if(!this.state.animating){var e=this.state.activeIndex===this.props.comments.length-1?0:this.state.activeIndex+1;this.setActiveIndex(e)}}},{key:"previous",value:function(){if(!this.state.animating){var e=0===this.state.activeIndex?this.props.comments.length-1:this.state.activeIndex-1;this.setActiveIndex(e)}}},{key:"handleComment",value:function(e){this.props.postComment(e),this.props.resetFeedbackForm()}},{key:"renderCommentsCarousel",value:function(e){var t=this,a=e.comments,n=a.map((function(e){return r.a.createElement(b.a,{inverse:!0,onExiting:function(){return t.setAnimating(!0)},onExited:function(){return t.setAnimating(!1)},key:e.id},r.a.createElement("div",null,r.a.createElement(C.a,{isOpen:!t.state.toastShow},r.a.createElement(x.a,{className:"roundedBottomCorners roundedTopCorners",inverse:!0,color:"dark"},r.a.createElement(N.a,null,r.a.createElement("h4",null,r.a.createElement("strong",null,e.message.slice(0,20)+"...")),r.a.createElement("p",null," ~ ",e.author," "))))))})),o=a.map((function(e){return r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement(v.Fade,{in:!0},r.a.createElement(N.a,{className:"cardComment"},r.a.createElement("p",{className:"align text-left nex"},r.a.createElement("strong",null,'"'+e.message+'"')),r.a.createElement("p",{className:"align text-right ex"},r.a.createElement("i",null," ~ ",e.author," "," ,  ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e.date)))))))))}));return r.a.createElement("div",null,r.a.createElement(O.a,{inverse:!0,color:"dark",activeIndex:this.state.activeIndex,next:this.next,previous:this.previous},r.a.createElement(w.a,{"text-color":"dark",items:a,activeIndex:this.state.activeIndex,onClickHandler:this.setActiveIndex}),n,r.a.createElement(y.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(y.a,{direction:"next",directionText:"Next",onClickHandler:this.next})),r.a.createElement("a",{onClick:this.toggleToastShow},this.state.toastShow?r.a.createElement("div",null,"show less","  ",r.a.createElement("span",{className:"fa fa-angle-up fa-lg"})):r.a.createElement("div",null,"show more"," ("+(t.props.comments.length-1)+" comments)  ",r.a.createElement("span",{className:"fa fa-angle-down fa-lg"}))),r.a.createElement("div",null,r.a.createElement(C.a,{isOpen:this.state.toastShow},r.a.createElement("ul",{className:"list-unstyled"},r.a.createElement(v.Stagger,{in:!0},o)))))}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(g,null)));if(this.props.errMess)return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.props.errMess)));if(null!=this.props.comments){return r.a.createElement("div",{className:"container "},r.a.createElement("br",null),r.a.createElement("div",{className:"row justify-content-center "},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-5 ",styles:{"margin-bottom":"0"}},r.a.createElement(x.a,{className:"roundedTopCorners"},r.a.createElement(k.a,{className:"darkCardHeader bg-dark",tag:"h3"},r.a.createElement("strong",null,"Leave us a comment!"),r.a.createElement("textonbutton",null)),r.a.createElement(N.a,null,r.a.createElement(u.Form,{model:"feedback",onSubmit:function(t){return e.handleComment(t)}},r.a.createElement(j.a,{className:"form-group"},r.a.createElement(S.a,{xs:{size:10,offset:1}},r.a.createElement(u.Control.text,{className:"form-control",model:".author",id:"author",name:"author",placeholder:"Name",validators:{required:I,validName:T(3,15)}}),r.a.createElement(u.Errors,{className:"text-danger text-center",model:".author",show:"touched",messages:{required:" required ! .. ",validName:" Please enter a valid name(3-20 characters) "}}))),r.a.createElement(j.a,{className:"form-group"},r.a.createElement(S.a,{xs:{size:10,offset:1}},r.a.createElement(u.Control.text,{className:"form-control",model:".email",id:"email",name:"email",placeholder:"Email ID",validators:{required:I,validEmail:A}}),r.a.createElement(u.Errors,{className:"text-danger text-center",model:".email",show:"touched",messages:{required:"required ! ..",validEmail:" Please enter a valid email "}}))),r.a.createElement(j.a,{className:"form-group"},r.a.createElement(S.a,{xs:{size:10,offset:1}},r.a.createElement(u.Control.textarea,{className:"form-control",model:".message",id:"message",name:"message",placeholder:"Tell us about your opinion",rows:5,validators:{validName:T(2,500)}}),r.a.createElement(u.Errors,{className:"text-danger text-center",model:".message",show:"touched",messages:{required:" required ! .. ",validName:" Write something before you submit "}}))),r.a.createElement(j.a,{className:"form-group"},r.a.createElement(S.a,{md:{size:10,offset:1}},r.a.createElement(M.a,{type:"submit",color:"dark"},r.a.createElement("span",{className:"fa fa-pencil "}," ")," ","Submit")))))))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:" col-12 col-md-8 col-lg-5 ",styles:{"margin-top":"0"}},r.a.createElement(x.a,{className:"roundedBottomCorners"},r.a.createElement(N.a,null,r.a.createElement("a",{onClick:this.toggleComment},!1===this.state.isCommentFormOpen?r.a.createElement("div",null,r.a.createElement("strong",null,"Show Comments ",r.a.createElement("i",{className:"fa fa-lg fa-angle-down"}))):r.a.createElement("div",null,r.a.createElement("strong",null,"Hide Comments ",r.a.createElement("i",{className:"fa fa-lg fa-angle-up"})))),r.a.createElement(C.a,{isOpen:this.state.isCommentFormOpen},r.a.createElement("br",null),this.renderCommentsCarousel({comments:this.props.comments})))))))}}}]),a}(n.Component),D=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchComments()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(F,{commentsLoading:this.props.comments.isLoading,commentsErrMess:this.props.comments.errMess,comments:this.props.comments.comments,postComment:this.props.postComment,resetFeedbackForm:this.props.resetFeedbackForm}))}}]),a}(n.Component),L=Object(d.connect)((function(e){return{comments:e.comments}}),(function(e){return{postComment:function(t){return e(function(e){return function(t){var a=Object.assign({date:(new Date).toISOString()},e);return fetch(h+"comments",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return alert("Thanks for your feedback!"),e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"ADD_COMMENT",payload:e}}(e))})).catch((function(e){console.log("Post comments",e.message),alert("Your comment could not be updated\n Error:"+e.message)}))}}(t))},fetchComments:function(){e((function(e){return fetch(h+"comments").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(p(t))})).catch((function(t){return e(f(t.message))}))}))},resetFeedbackForm:function(){e(u.actions.reset("feedback"))}}}))(D),q=a(80),_=a(14),P=a(78),H=a(79),z=a.n(H),B=a(30),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENTS":return Object(B.a)({},e,{isLoading:!1,errMess:null,comments:t.payload});case"COMMENTS_LOADING":return Object(B.a)({},e,{isLoading:!0,errMess:null,comments:[]});case"COMMENTS_FAILED":return Object(B.a)({},e,{isLoading:!1,errMess:t.payload,comments:[]});case"ADD_COMMENT":var a=t.payload;return Object(B.a)({},e,{comments:e.comments.concat(a)});default:return e}},W={author:"",email:"",message:""},Z=Object(_.createStore)(Object(_.combineReducers)(Object(q.a)({comments:J},Object(u.createForms)({feedback:W}))),Object(_.applyMiddleware)(P.a,z.a));var $=function(){return r.a.createElement(d.Provider,{store:Z},r.a.createElement("div",{className:"App"},r.a.createElement(L,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(138)},89:function(e,t,a){},90:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.6b01b3e9.chunk.js.map