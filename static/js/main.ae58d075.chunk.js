(this.webpackJsonpmanojform=this.webpackJsonpmanojform||[]).push([[0],{128:function(e,t,a){},136:function(e,t,a){e.exports=a.p+"static/media/pngguru.com.18cdb459.png"},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),l=(a(84),a(85),a(86),a(87),a(88),a(41)),c=a(42),m=a(43),i=a(44),u=a(14),d=a(12),h="https://manojdb.herokuapp.com/",f=function(e){return{type:"COMMENTS_FAILED",payload:e}},E=function(e){return{type:"ADD_COMMENTS",payload:e}},p=a(10),g=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",null,"Loading . . ."))},v=a(76),b=a(139),C=a(140),x=a(141),w=a(142),N=a(143),O=a(144),y=a(145),j=a(146),k=a(147),S=a(148),M=a(149),I=a(150),A=(a(128),function(e){return e&&e.length}),T=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},D=function(e,t){return function(a){return(n=e,function(e){return e&&e.length>=n})(a)&&function(e){return function(t){return!t||t.length<=e}}(t)(a);var n}},L=function(e){Object(i.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={isCommentFormOpen:!1,animating:!1,activeIndex:0,toastShow:!1},a.renderCommentsCarousel=a.renderCommentsCarousel.bind(Object(p.a)(a)),a.toggleComment=a.toggleComment.bind(Object(p.a)(a)),a.handleComment=a.handleComment.bind(Object(p.a)(a)),a.next=a.next.bind(Object(p.a)(a)),a.previous=a.previous.bind(Object(p.a)(a)),a.setActiveIndex=a.setActiveIndex.bind(Object(p.a)(a)),a.setAnimating=a.setAnimating.bind(Object(p.a)(a)),a.toggleToastShow=a.toggleToastShow.bind(Object(p.a)(a)),a}return Object(c.a)(n,[{key:"toggleComment",value:function(){this.setState({isCommentFormOpen:!this.state.isCommentFormOpen})}},{key:"toggleToastShow",value:function(){this.setState({toastShow:!this.state.toastShow})}},{key:"setActiveIndex",value:function(e){this.setState({activeIndex:e})}},{key:"setAnimating",value:function(e){this.setState({animating:e})}},{key:"next",value:function(){if(!this.state.animating){var e=this.state.activeIndex===this.props.comments.length-1?0:this.state.activeIndex+1;this.setActiveIndex(e)}}},{key:"previous",value:function(){if(!this.state.animating){var e=0===this.state.activeIndex?this.props.comments.length-1:this.state.activeIndex-1;this.setActiveIndex(e)}}},{key:"handleComment",value:function(e){this.props.postComment(e)}},{key:"renderCommentsCarousel",value:function(e){var t=this,n=e.comments,o=n.map((function(e){return r.a.createElement(v.a,{inverse:!0,onExiting:function(){return t.setAnimating(!0)},onExited:function(){return t.setAnimating(!1)},key:e.id},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(b.a,{height:250,width:350,src:a(136),alt:"no image"}),r.a.createElement(C.a,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h3",null,r.a.createElement("strong",null,e.message.slice(0,20)+"...")),r.a.createElement("p",null," ~ ",e.author," "," ,  ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e.date)))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{isOpen:t.state.toastShow},r.a.createElement(w.a,{inverse:!0,color:"dark"},r.a.createElement(N.a,null,r.a.createElement("p",null,r.a.createElement("strong",null,e.message)),r.a.createElement("p",null," ~ ",e.author," "," ,  ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e.date)))),r.a.createElement("br",null))))))}));return r.a.createElement("div",null,r.a.createElement(O.a,{inverse:!0,color:"dark",activeIndex:this.state.activeIndex,next:this.next,previous:this.previous},r.a.createElement(y.a,{"text-color":"dark",items:n,activeIndex:this.state.activeIndex,onClickHandler:this.setActiveIndex}),o,r.a.createElement(j.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(j.a,{direction:"next",directionText:"Next",onClickHandler:this.next})),r.a.createElement("a",{onClick:this.toggleToastShow},this.state.toastShow?r.a.createElement("div",null,"show less"," ",r.a.createElement("span",{className:"fa fa-angle-up fa-lg"})):r.a.createElement("div",null,"show more"," ",r.a.createElement("span",{className:"fa fa-angle-down fa-lg"}))))}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(g,null)));if(this.props.errMess)return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.props.errMess)));if(null!=this.props.comments){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-5 offset-md-2",styles:{"margin-bottom":"0"}},r.a.createElement(w.a,{className:"roundedTopCorners"},r.a.createElement(k.a,{className:"darkCardHeader bg-dark",tag:"h3"},r.a.createElement("strong",null,"Leave us a comment!"),r.a.createElement("textonbutton",null)),r.a.createElement(N.a,null,r.a.createElement(u.LocalForm,{onSubmit:function(t){return e.handleComment(t)}},r.a.createElement(S.a,{className:"form-group"},r.a.createElement(M.a,{xs:{size:10,offset:1}},r.a.createElement(u.Control.text,{className:"form-control",model:".author",id:"author",name:"author",placeholder:"Name",validators:{required:A,validName:D(3,15)}}),r.a.createElement(u.Errors,{className:"text-danger text-center",model:".author",show:"touched",messages:{required:" required ! .. ",validName:" Please enter a valid name(3-20 characters) "}}))),r.a.createElement(S.a,{className:"form-group"},r.a.createElement(M.a,{xs:{size:10,offset:1}},r.a.createElement(u.Control.text,{className:"form-control",model:".email",id:"email",name:"email",placeholder:"Email ID",validators:{required:A,validEmail:T}}),r.a.createElement(u.Errors,{className:"text-danger text-center",model:".email",show:"touched",messages:{required:"required ! ..",validEmail:" Please enter a valid email "}}))),r.a.createElement(S.a,{className:"form-group"},r.a.createElement(M.a,{xs:{size:10,offset:1}},r.a.createElement(u.Control.textarea,{className:"form-control",model:".message",id:"message",name:"message",placeholder:"Tell us about your opinion",rows:5,validators:{validName:D(2,500)}}),r.a.createElement(u.Errors,{className:"text-danger text-center",model:".message",show:"touched",messages:{required:" required ! .. ",validName:" Write something before you submit "}}))),r.a.createElement(S.a,{className:"form-group"},r.a.createElement(M.a,{md:{size:10,offset:1}},r.a.createElement(I.a,{type:"submit",color:"dark"},r.a.createElement("span",{className:"fa fa-pencil "}," ")," ","Submit")))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-5 offset-md-2 ",styles:{"margin-top":"0"}},r.a.createElement(w.a,{className:"roundedBottomCorners"},r.a.createElement(N.a,null,r.a.createElement("a",{onClick:this.toggleComment},!1===this.state.isCommentFormOpen?r.a.createElement("div",null,r.a.createElement("strong",null,"Show Comments ",r.a.createElement("i",{className:"fa fa-lg fa-angle-down"}))):r.a.createElement("div",null,r.a.createElement("strong",null,"Hide Comments ",r.a.createElement("i",{className:"fa fa-lg fa-angle-up"})))),r.a.createElement(x.a,{isOpen:this.state.isCommentFormOpen},r.a.createElement("br",null),this.renderCommentsCarousel({comments:this.props.comments})))))))}}}]),n}(n.Component),F=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchComments()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L,{commentsLoading:this.props.comments.isLoading,commentsErrMess:this.props.comments.errMess,comments:this.props.comments.comments,postComment:this.props.postComment}))}}]),a}(n.Component),q=Object(d.connect)((function(e){return{comments:e.comments}}),(function(e){return{postComment:function(t){return e(function(e){return function(t){var a=Object.assign({date:(new Date).toISOString()},e);return fetch(h+"comments",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"ADD_COMMENT",payload:e}}(e))})).catch((function(e){console.log("Post comments",e.message),alert("Your comment could not be updated\n Error:"+e.message)}))}}(t))},fetchComments:function(){e((function(e){return fetch(h+"comments").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(E(t))})).catch((function(t){return e(f(t.message))}))}))}}}))(F),_=a(13),P=a(77),H=a(78),z=a.n(H),B=a(30),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENTS":return Object(B.a)({},e,{isLoading:!1,errMess:null,comments:t.payload});case"COMMENTS_LOADING":return Object(B.a)({},e,{isLoading:!0,errMess:null,comments:[]});case"COMMENTS_FAILED":return Object(B.a)({},e,{isLoading:!1,errMess:t.payload,comments:[]});case"ADD_COMMENT":var a=t.payload;return Object(B.a)({},e,{comments:e.comments.concat(a)});default:return e}},W=Object(_.createStore)(Object(_.combineReducers)({comments:J}),Object(_.applyMiddleware)(P.a,z.a));var Z=function(){return r.a.createElement(d.Provider,{store:W},r.a.createElement("div",{className:"App"},r.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,a){e.exports=a(137)},87:function(e,t,a){},88:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.ae58d075.chunk.js.map