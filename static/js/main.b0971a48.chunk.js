(this.webpackJsonpmanojform=this.webpackJsonpmanojform||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(12),m=a.n(o),s=(a(83),a(84),a(85),a(86),a(87),a(40)),c=a(41),l=a(42),i=a(43),u=a(10),d=a(13),h="http://localhost:3001/",p=function(e){return{type:"COMMENTS_FAILED",payload:e}},f=function(e){return{type:"ADD_COMMENTS",payload:e}},E=a(24),g=a(56),v=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",null,"Loading . . ."))},C=a(136),N=a(137),b=a(138),O=a(139),y=a(145),w=a(140),j=a(141),M=a(142),S=a(143),D=a(144),k=function(e){return e&&e.length},x=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},T=function(e,t){return function(a){return(n=e,function(e){return e&&e.length>=n})(a)&&function(e){return function(t){return!t||t.length<=e}}(t)(a);var n}},F=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isCommentFormOpen:!1},n.RenderComments=n.RenderComments.bind(Object(E.a)(n)),n.toggleComment=n.toggleComment.bind(Object(E.a)(n)),n.handleComment=n.handleComment.bind(Object(E.a)(n)),n}return Object(c.a)(a,[{key:"toggleComment",value:function(){this.setState({isCommentFormOpen:!this.state.isCommentFormOpen})}},{key:"handleComment",value:function(e){this.toggleComment(),this.props.postComment(e)}},{key:"RenderComments",value:function(e){var t=e.comments.map((function(e){return r.a.createElement(g.Fade,{in:!0},r.a.createElement("li",{key:e.id},r.a.createElement("p",{className:"row"},e.message),r.a.createElement("p",null,"-- ",e.author," ","   ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e.date))))))}));return r.a.createElement(C.a,{inverse:!0,style:{backgroundColor:"#333",borderColor:"#300"}},r.a.createElement(N.a,{tag:"h3"},"Comments"),r.a.createElement(b.a,null,r.a.createElement("div",{className:"container",style:{padding:"0px 35px 35px 35px"}},r.a.createElement("ul",{className:"list-unstyled"},r.a.createElement(g.Stagger,{in:!0},t)),r.a.createElement("div",{className:"row"},r.a.createElement(O.a,{onClick:this.toggleComment},r.a.createElement("span",{className:"fa fa-pencil"})," ","Submit Comment")))))}},{key:"render",value:function(){var e=this;return this.props.isLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(v,null))):this.props.errMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.props.errMess))):null!=this.props.comments?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-12 col-md-9 offset-md-3 m-1"},this.RenderComments({comments:this.props.comments}))),r.a.createElement(y.a,{isOpen:this.state.isCommentFormOpen,toggle:this.toggleComment},r.a.createElement(w.a,{toggle:this.toggleComment},"Submit Comment"),r.a.createElement(j.a,null,r.a.createElement(u.LocalForm,{onSubmit:function(t){return e.handleComment(t)}},r.a.createElement(M.a,{className:"form-group"},r.a.createElement(S.a,{htmlFor:"author",md:2},"Name"),r.a.createElement(D.a,{md:10},r.a.createElement(u.Control.text,{className:"form-control",model:".author",id:"author",name:"author",placeholder:"Name",validators:{required:k,validName:T(3,15)}}),r.a.createElement(u.Errors,{className:"alert-danger text-center",model:".author",show:"touched",messages:{required:" required ! .. ",validName:" Please enter a valid name(3-20 characters) "}}))),r.a.createElement(M.a,{className:"form-group"},r.a.createElement(S.a,{htmlFor:"email",md:2},"Email"),r.a.createElement(D.a,{md:10},r.a.createElement(u.Control.text,{className:"form-control",model:".email",id:"email",name:"email",placeholder:"Email ID",validators:{required:k,validEmail:x}}),r.a.createElement(u.Errors,{className:"alert-danger text-center",model:".email",show:"touched",messages:{required:"required ! ..",validEmail:" Please enter a valid email "}}))),r.a.createElement(M.a,{className:"form-group"},r.a.createElement(S.a,{htmlFor:"message",md:2},"Comment"),r.a.createElement(D.a,{md:10},r.a.createElement(u.Control.textarea,{className:"form-control",model:".message",id:"message",name:"message",placeholder:"Tell us about your opinion",rows:12,validators:{validName:T(2,500)}}),r.a.createElement(u.Errors,{className:"alert-danger text-center",model:".message",show:"touched",messages:{required:" required ! .. ",validName:" Write something before you submit "}}))),r.a.createElement(M.a,{className:"form-group"},r.a.createElement(D.a,{md:{size:10,offset:2}},r.a.createElement(O.a,{type:"submit",color:"primary"},r.a.createElement("span",{className:"fa fa-pencil "}," ")," ","Submit feedback"))))))):void 0}}]),a}(n.Component),L=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchComments()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"helo"),r.a.createElement(F,{commentsLoading:this.props.comments.isLoading,commentsErrMess:this.props.comments.errMess,comments:this.props.comments.comments,postComment:this.props.postComment}))}}]),a}(n.Component),A=Object(d.connect)((function(e){return{comments:e.comments}}),(function(e){return{postComment:function(t){return e(function(e){return function(t){var a=Object.assign({date:(new Date).toISOString()},e);return fetch(h+"comments",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"ADD_COMMENT",payload:e}}(e))})).catch((function(e){console.log("Post comments",e.message),alert("Your comment could not be updated\n Error:"+e.message)}))}}(t))},fetchComments:function(){e((function(e){return fetch(h+"comments").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(f(t))})).catch((function(t){return e(p(t.message))}))}))}}}))(L),q=a(14),_=a(76),I=a(77),P=a.n(I),R=a(29),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENTS":return Object(R.a)({},e,{isLoading:!1,errMess:null,comments:t.payload});case"COMMENTS_LOADING":return Object(R.a)({},e,{isLoading:!0,errMess:null,comments:[]});case"COMMENTS_FAILED":return Object(R.a)({},e,{isLoading:!1,errMess:t.payload,comments:[]});case"ADD_COMMENT":var a=t.payload;return Object(R.a)({},e,{comments:e.comments.concat(a)});default:return e}},W=Object(q.createStore)(Object(q.combineReducers)({comments:J}),Object(q.applyMiddleware)(_.a,P.a));var Z=function(){return r.a.createElement(d.Provider,{store:W},r.a.createElement("div",{className:"App"},r.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,a){e.exports=a(134)},86:function(e,t,a){},87:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.b0971a48.chunk.js.map